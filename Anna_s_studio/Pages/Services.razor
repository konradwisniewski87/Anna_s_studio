@page "/services"
@inherits LayoutComponentBase
@inject I18nService I18n
@inject NavigationManager NavigationManager
@using Anna_s_studio.Services
@implements IDisposable

<div class="services-list">
    @foreach (var service in ServicesList)
    {
        <button class="service-btn-horizontal" @onclick="() => Book(service)">
            <span class="service-emoji">@service.Emoji</span>
            <span class="service-name">@I18n.T(service.Name)</span>
            <span class="service-duration">@service.Duration @I18n.T("min")</span>
            <span class="service-price">@service.Price</span>
        </button>
    }
</div>

@code {
    List<Service> ServicesList = new()
    {
        new Service { Emoji = "❤️", Name = "MasterKobidoUp", Duration = 60, Price = "£60" },
        new Service { Emoji = "💛", Name = "KobidoBody", Duration = 70, Price = "£70" },
        new Service { Emoji = "💚", Name = "TransBuccal", Duration = 60, Price = "£65" },
        new Service { Emoji = "🩷", Name = "AestheticKinesiologyTaping", Duration = 30, Price = "£30" },
        new Service { Emoji = "💜", Name = "FacialAcupuncture", Duration = 60, Price = "£70" },
        new Service { Emoji = "💙", Name = "DeepTissueMassage", Duration = 60, Price = "£70" }
    };

    void Book(Service service)
    {
        NavigationManager.NavigateTo("/bookvisit");
    }

    protected override void OnInitialized()
    {
        I18n.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        I18n.OnChange -= StateHasChanged;
    }
}
